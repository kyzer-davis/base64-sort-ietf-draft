



Independent                                                     D. Brown
Internet-Draft                                               K. R. Davis
Intended status: Informational                             Cisco Systems
Expires: 14 June 2026                                   11 December 2025


                            Base64 Sortable
                           draft-base64-sort

Abstract

   This document details a formal specification for a new Base64
   alphabet that follows the US-ASCII ordering and is sorts the same as
   binary.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 14 June 2026.

Copyright Notice

   Copyright (c) 2025 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.






Brown & Davis             Expires 14 June 2026                  [Page 1]

Internet-Draft                 base64-sort                 December 2025


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  The Alphabet  . . . . . . . . . . . . . . . . . . . . . . . .   2
     2.1.  Padding . . . . . . . . . . . . . . . . . . . . . . . . .   4
   3.  Decoding  . . . . . . . . . . . . . . . . . . . . . . . . . .   4
   4.  Industry Tests  . . . . . . . . . . . . . . . . . . . . . . .   4
     4.1.  Programming Language Results  . . . . . . . . . . . . . .   4
     4.2.  Database Test Results . . . . . . . . . . . . . . . . . .   5
     4.3.  Conclusion  . . . . . . . . . . . . . . . . . . . . . . .   5
   5.  Conventions and Definitions . . . . . . . . . . . . . . . . .   5
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   7.  Normative References  . . . . . . . . . . . . . . . . . . . .   6
   Appendix A.  Changelog  . . . . . . . . . . . . . . . . . . . . .   6
   Appendix B.  Test Vectors . . . . . . . . . . . . . . . . . . . .   6
     B.1.  Encoding  . . . . . . . . . . . . . . . . . . . . . . . .   6
     B.2.  Decoding  . . . . . . . . . . . . . . . . . . . . . . . .   7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   Base64 ([RFC4648], Section 4) and Base64url ([RFC4648], Section 5)
   have been widely implemented and tested accross the industry;
   However, if we need a lexicographical sortable ID we have to use
   Base32hex, Base36, or Base58.  There is not a unified way of doing
   this for Base64.

   This document serves as an informational RFC to provide a new
   alphabet that follows the US-ASCII ordering, re-uses the Base64url
   special characters and sorts the same as binary.

2.  The Alphabet

   This Base64 Sortable alphabet is a variant of the Base64url alphabet
   ([RFC4648], Section 5).  While it utilizes the same set of 64 URL-
   safe characters as Base64url, its fundamental distinction lies in the
   assignment of values to these characters.  This alphabet is
   specifically designed such that its encoded output sorts
   lexicographically in the same order as the underlying binary data, by
   aligning the character values with their US-ASCII ordering.

   Section 2 details the alphabet characters along with their respective
   decoding and encoding values.








Brown & Davis             Expires 14 June 2026                  [Page 2]

Internet-Draft                 base64-sort                 December 2025


    +=====+========+=====+==========+=====+==========+=====+==========+
    |Value|Encoding|Value| Encoding |Value| Encoding |Value| Encoding |
    +=====+========+=====+==========+=====+==========+=====+==========+
    |0    |-       |16   | F        |32   | V        |48   | k        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |1    |0       |17   | G        |33   | W        |49   | l        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |2    |1       |18   | H        |34   | X        |50   | m        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |3    |2       |19   | I        |35   | Y        |51   | n        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |4    |3       |20   | J        |36   | Z        |52   | o        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |5    |4       |21   | K        |37   | _        |53   | p        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |6    |5       |22   | L        |38   | a        |54   | q        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |7    |6       |23   | M        |39   | b        |55   | r        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |8    |7       |24   | N        |40   | c        |56   | s        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |9    |8       |25   | O        |41   | d        |57   | t        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |10   |9       |26   | P        |42   | e        |58   | u        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |11   |A       |27   | Q        |43   | f        |59   | v        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |12   |B       |28   | R        |44   | g        |60   | w        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |13   |C       |29   | S        |45   | h        |61   | x        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |14   |D       |30   | T        |46   | i        |62   | y        |
    +-----+--------+-----+----------+-----+----------+-----+----------+
    |15   |E       |31   | U        |47   | j        |63   | z        |
    +-----+--------+-----+----------+-----+----------+-----+----------+

                                  Table 1

   The Alphabet as a continuous text input is as follows:
   -0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz











Brown & Davis             Expires 14 June 2026                  [Page 3]

Internet-Draft                 base64-sort                 December 2025


2.1.  Padding

   Consistent with Base64url ([RFC4648], Section 5), the padding
   character = is optional in Base64 Sortable encoded data.  When
   padding is omitted, the decoder must infer the original data length
   based on the length of the encoded string.  If padding is present,
   the = character is used.  Implementers should note that the =
   character is not URL-safe and would require percent-encoding (e.g.,
   %3D) if the encoded string is to be directly embedded within certain
   URL components.  The Base64 Sortable encoding process itself does not
   perform this percent-encoding.

3.  Decoding

   The decoding process for Base64sort follows the principles outlined
   in ([RFC4648], Section 5), for decoding Base64url.  An encoded string
   is first processed by removing any optional padding characters (=).
   If padding is absent, the decoder infers the original data length
   from the encoded string length.  Each character from the (potentially
   unpadded) encoded string is then mapped directly to its corresponding
   6-bit value using the Base64 Sortable alphabet defined in Section 2.
   These 6-bit values are concatenated to form a continuous bit stream,
   which is subsequently reassembled into 8-bit octets to reconstruct
   the original binary data.  Any partial octets resulting from the
   padding removal are discarded.

4.  Industry Tests

   To validate the lexicographical sortability of the Base64 Sortable
   alphabet in common computing environments, a series of tests were
   conducted across various programming languages and database systems.
   The objective was to observe how a mixed list of characters from the
   proposed alphabet would sort using their default string comparison
   mechanisms.

4.1.  Programming Language Results

   Tests were performed using Python, C, C++, Java, JavaScript, Delphi/
   Object Pascal, Perl, and Go.  In these languages, a list containing a
   subset of the Base64 Sortable alphabet characters (A, a, b, 7, 3, B,
   C, c, E, z, -, _) was sorted.  The results consistently demonstrated
   sorting according to the US-ASCII character order: -, 3, 7, A, B, C,
   E, _, a, b, c, z.  This indicates that the chosen character set and
   their relative ASCII values are respected by the default string
   sorting algorithms in these environments.






Brown & Davis             Expires 14 June 2026                  [Page 4]

Internet-Draft                 base64-sort                 December 2025


   However, C# and Visual Basic exhibited a different sorting behavior,
   placing _ before 3 and sorting uppercase letters after their
   lowercase counterparts (e.g., a before A).  This suggests that their
   default string comparison routines may employ locale-aware or
   cultural sorting rules rather than strict ordinal (ASCII) comparison.

4.2.  Database Test Results

   Database tests were conducted on SQL (PostgreSQL), MongoDB, and
   Redis.

   *  *SQL*: When using ORDER BY val ASC, the default collation resulted
      in _ appearing before -, and lowercase letters before uppercase
      (e.g., a before A).  However, explicitly specifying ORDER BY val
      COLLATE "C" (which enforces a C locale, often equivalent to strict
      ASCII ordering) produced the desired sort order: -, 3, 7, A, B, C,
      E, _, a, b, c, z.

   *  *MongoDB*: MongoDB's default sort behavior for the test set
      aligned with the desired US-ASCII order, matching the results
      observed in most programming languages.

   *  *Redis*: Redis's SORT ... ALPHA command also showed a deviation,
      placing _ before 3 and lowercase letters before uppercase, similar
      to the default SQL, C#, and Visual Basic results.

4.3.  Conclusion

   The testing confirms that the Base64 Sortable alphabet generally
   achieves its goal of producing lexicographically sortable output when
   standard US-ASCII or C-locale string comparison rules are applied.
   Implementers should be aware that certain programming languages
   (e.g., C#, Visual Basic) and database systems (e.g., default SQL
   collations, Redis) may employ locale-aware or alternative default
   collation rules that can alter the sort order.  To ensure consistent
   binary-equivalent sorting, explicit specification of ordinal or
   C-locale collation may be necessary in environments where such
   options are available.

5.  Conventions and Definitions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.





Brown & Davis             Expires 14 June 2026                  [Page 5]

Internet-Draft                 base64-sort                 December 2025


6.  IANA Considerations

   This document has no IANA actions.

7.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/rfc/rfc2119>.

   [RFC4648]  Josefsson, S., "The Base16, Base32, and Base64 Data
              Encodings", RFC 4648, DOI 10.17487/RFC4648, October 2006,
              <https://www.rfc-editor.org/rfc/rfc4648>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/rfc/rfc8174>.

Appendix A.  Changelog

   draft-00:

   *  Initial Release

Appendix B.  Test Vectors

   The following text vectors start with a base of those found in
   [RFC4648] and then add additional values that illustrate decoding of
   specific values and the usage of the checksum.

B.1.  Encoding

        +=============+==================+===========+============+
        | Input       | Encoded Data     | Checksum? | Input Type |
        +=============+==================+===========+============+
        | ""          | ""               | N         | Text       |
        +-------------+------------------+-----------+------------+
        | f           | OV               | N         | Text       |
        +-------------+------------------+-----------+------------+
        | fo          | Oaw              | N         | Text       |
        +-------------+------------------+-----------+------------+
        | foo         | Oaxj             | N         | Text       |
        +-------------+------------------+-----------+------------+
        | foobar      | OaxjNa4m         | N         | Text       |
        +-------------+------------------+-----------+------------+
        | Hello World | H5KgQ5xr74SjRalZ | N         | Text       |
        +-------------+------------------+-----------+------------+



Brown & Davis             Expires 14 June 2026                  [Page 6]

Internet-Draft                 base64-sort                 December 2025


                   Table 2: Base64 Sortable Encode Table

B.2.  Decoding

      +==================+==============+===========================+
      | Input            | Decoded Data | Test Info                 |
      +==================+==============+===========================+
      | ""               | ""           | Empty string              |
      +------------------+--------------+---------------------------+
      | OV               | f            | Single byte input         |
      +------------------+--------------+---------------------------+
      | Oaw              | fo           | Two bytes input           |
      +------------------+--------------+---------------------------+
      | Oaxj             | foo          | Three bytes input         |
      +------------------+--------------+---------------------------+
      | OaxjNa4m         | foobar       | Original 'foobar' example |
      +------------------+--------------+---------------------------+
      | H5KgQ5xr74SjRalZ | Hello World  | Common phrase             |
      +------------------+--------------+---------------------------+

                   Table 3: Base64 Sortable Decode Table

Authors' Addresses

   Dillon Brown
   Cisco Systems
   Email: dillbrow@cisco.com


   Kyzer R. Davis
   Cisco Systems
   Email: kydavis@cisco.com



















Brown & Davis             Expires 14 June 2026                  [Page 7]
